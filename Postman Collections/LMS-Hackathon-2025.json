{
	"info": {
		"_postman_id": "bda5396c-789e-40d4-9a86-0398101dc496",
		"name": "LMS-Hackathon-2025",
		"schema": "https://schema.getpostman.com/json/collection/v2.0.0/collection.json"
	},
	"item": [
		{
			"name": "UserController",
			"item": [
				{
					"name": "Create User Login with Role",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "f854d671-a716-4003-b6ec-59ed04a2ec18",
								"exec": [
									" //parse json\r",
									" const res = pm.response.json();\r",
									"\r",
									"//Dynamic status code validation\r",
									"const expectedStatus = parseInt(pm.iterationData.get(\"Expected Status\"));\r",
									"if (expectedStatus) {\r",
									"    pm.test(\"Status code is \" + expectedStatus, function () {\r",
									"        pm.response.to.have.status(expectedStatus);\r",
									"    });\r",
									"}\r",
									"\r",
									"// validates response message only  when run status = 201\r",
									"if (pm.response.code === 201) {\r",
									"\r",
									"   console.log(\"User Created Successfully\");\r",
									"   console.log(res);\r",
									"\r",
									"    pm.test(\"Status code name has string\", function () {\r",
									"    pm.response.to.have.status(\"Created\");\r",
									"    });\r",
									"   \r",
									"\r",
									"    //Validate mandatory fields and its types in user object\r",
									"    pm.test(\"User mandatory fields exist\", function () {\r",
									"        pm.expect(res.user).to.have.property(\"userFirstName\").that.is.a(\"string\");\r",
									"        pm.expect(res.user).to.have.property(\"userLastName\").that.is.a(\"string\");\r",
									"        pm.expect(res.user).to.have.property(\"userLocation\").that.is.a(\"string\");\r",
									"        pm.expect(res.user).to.have.property(\"userTimeZone\").that.is.a(\"string\");\r",
									"        pm.expect(res.user).to.have.property(\"userVisaStatus\").that.is.a(\"string\");\r",
									"        pm.expect(res.user).to.have.property(\"userLoginEmail\").that.is.a(\"string\");\r",
									"    });\r",
									"\r",
									"    //Validate mandatory fields and its types in roles array\r",
									"    pm.test(\"Role mandatory fields exist\", function () {\r",
									"        pm.expect(res.roles).to.be.an(\"array\").that.is.not.empty;\r",
									"        pm.expect(res.roles[0]).to.have.property(\"roleId\").that.is.a(\"string\");\r",
									"        pm.expect(res.roles[0]).to.have.property(\"userRoleStatus\").that.is.a(\"string\");\r",
									"    });\r",
									"\r",
									"    // ----- Save userId  for chaining-----\r",
									"    if (res.user && res.user.userId) {\r",
									"        pm.collectionVariables.set(\"userId\", res.user.userId);\r",
									"        console.log(\"Saved userId:\", res.user.userId);\r",
									"    } else {\r",
									"        console.log(\"userId not found in response\");\r",
									"    }\r",
									"\r",
									"    // ----- Save roleId (roles is an array) -----\r",
									"    if (res.roles && Array.isArray(res.roles) && res.roles.length > 0) {\r",
									"        pm.collectionVariables.set(\"roleId\", res.roles[0].roleId);\r",
									"        console.log(\"Saved roleId:\", res.roles[0].roleId);\r",
									"    } else {\r",
									"        console.log(\"roleId not found in response\");\r",
									"    }\r",
									"}\r",
									"\r",
									"\r",
									"\r",
									"//schema validation \r",
									"const schema = {\r",
									"    \"type\": \"object\",\r",
									"    \"properties\": {\r",
									"        \"user\": {\r",
									"            \"type\": \"object\",\r",
									"            \"properties\": {\r",
									"                \"userId\": { \"type\": \"string\" },\r",
									"                \"userFirstName\": { \"type\": \"string\" },\r",
									"                \"userLastName\": { \"type\": \"string\" },\r",
									"                \"userMiddleName\": { \"type\": \"string\" },\r",
									"                \"userPhoneNumber\": { \"type\": \"string\" },\r",
									"                \"userLocation\": { \"type\": \"string\" },\r",
									"                \"userTimeZone\": { \"type\": \"string\" },\r",
									"                \"userLinkedinUrl\": { \"type\": \"string\" },\r",
									"                \"userEduUg\": { \"type\": \"string\" },\r",
									"                \"userEduPg\": { \"type\": \"string\" },\r",
									"                \"userComments\": { \"type\": \"string\" },\r",
									"                \"userVisaStatus\": { \"type\": \"string\" },\r",
									"                \"userLoginEmail\": { \"type\": \"string\" }\r",
									"            },\r",
									"            \"required\": [\"userFirstName\", \"userLastName\", \"userPhoneNumber\", \"userLoginEmail\",\r",
									"            \"userLocation\",\"userTimeZone\",\"userVisaStatus\"]\r",
									"        },\r",
									"        \"roles\": {\r",
									"            \"type\": \"array\",\r",
									"            \"items\": {\r",
									"                \"type\": \"object\",\r",
									"                \"properties\": {\r",
									"                    \"roleId\": { \"type\": \"string\" },\r",
									"                    \"userRoleStatus\": { \"type\": \"string\" }\r",
									"                },\r",
									"                \"required\": [\"roleId\", \"userRoleStatus\"]\r",
									"            }\r",
									"        },\r",
									"        \"programBatches\": { \"type\": \"array\" },\r",
									"        \"skills\": { \"type\": \"array\" },\r",
									"        \"documents\": { \"type\": \"array\" }\r",
									"    },\r",
									"    \"required\": [\"user\", \"roles\"]\r",
									"};\r",
									"\r",
									"\r",
									"\r",
									"\r",
									"\r",
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"id": "9cfb4b0e-5ac8-45a1-93be-b9460201032e",
								"exec": [
									"\r",
									"//1. Get the nested objects from the Data File\r",
									"var loginData = pm.iterationData.get(\"userLogin\");\r",
									"var roleMaps = pm.iterationData.get(\"userRoleMaps\");\r",
									"\r",
									"\r",
									"// 2. Map 'userLogin' fields to variables\r",
									"if (loginData) {\r",
									"    // pm.variables.set(\"userLoginEmail\", loginData.userLoginEmail);\r",
									"    pm.variables.set(\"loginStatus\", loginData.loginStatus);\r",
									"    pm.variables.set(\"status\", loginData.status);\r",
									"}\r",
									"\r",
									"// 3. Map 'userRoleMaps' fields (taking the first item in the array)\r",
									"if (roleMaps && roleMaps.length > 0) {\r",
									"    pm.variables.set(\"roleId\", roleMaps[0].roleId);\r",
									"    pm.variables.set(\"userRoleStatus\", roleMaps[0].userRoleStatus);\r",
									"}\r",
									"\r",
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"id": "2e7e7ec1-d451-49eb-b4fb-1dba6ebd2097",
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": {
								"token": "{{token}}"
							}
						},
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{{Payload}}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": "{{baseUrl}}/users/roleStatus"
					},
					"response": []
				},
				{
					"name": "User information by Id",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "2d276953-309c-463c-8775-d3437b4d92c7",
								"exec": [
									"//Dynamic status code validation\r",
									"const expectedStatus = parseInt(pm.iterationData.get(\"Expected Status\"));\r",
									"if (expectedStatus) {\r",
									"    pm.test(\"Status code is \" + expectedStatus, function () {\r",
									"        pm.response.to.have.status(expectedStatus);\r",
									"    });\r",
									"}\r",
									"\r",
									"\r",
									"//Dynamic status response\r",
									"let expectedMessage = pm.iterationData.get(\"Expected Response Body\");\r",
									"if (expectedMessage) {\r",
									"    pm.test(\"Response message matches expected\", function() {\r",
									"        let res = pm.response.json();\r",
									"        pm.expect(res.message || res.status).to.include(expectedMessage);\r",
									"    });\r",
									"}\r",
									"// Parse response\r",
									"//let res = pm.response.json();\r",
									"\r",
									"// Parse Response\r",
									"// ---------------------------\r",
									"let res;\r",
									"try {\r",
									"    res = pm.response.json();\r",
									"} catch (e) {\r",
									"    // No JSON body\r",
									"    res = {};\r",
									"}\r",
									"\r",
									"// -----------------------------------------\r",
									"// 1. Validate USER object\r",
									"// -----------------------------------------\r",
									"//let user = res.user;\r",
									"\r",
									"// 3. Run positive validations ONLY when status = 200\r",
									"// ---------------------------\r",
									"if (pm.response.code === 200) {\r",
									"\r",
									"pm.test(\"Validate all required user fields\", function () {\r",
									"    const expectedUserFields = [\r",
									"        \"userId\",\r",
									"        \"userFirstName\",\r",
									"        \"userLastName\",\r",
									"        \"userMiddleName\",\r",
									"        \"userPhoneNumber\",\r",
									"        \"userLocation\",\r",
									"        \"userTimeZone\",\r",
									"        \"userLinkedinUrl\",\r",
									"        \"userEduUg\",\r",
									"        \"userEduPg\",\r",
									"        \"userComments\",\r",
									"        \"userVisaStatus\",\r",
									"        \"userLoginEmail\"\r",
									"    ];\r",
									"\r",
									"    expectedUserFields.forEach(field => {\r",
									"        pm.expect(user, `Missing field: ${field}`).to.have.property(field);\r",
									"    });\r",
									"});\r",
									"\r",
									"// -----------------------------------------\r",
									"// 2. Validate ROLES array\r",
									"// -----------------------------------------\r",
									"let roles = res.roles;\r",
									"\r",
									"pm.test(\"Roles should be an array\", function () {\r",
									"    pm.expect(roles).to.be.an(\"array\");\r",
									"    pm.expect(roles.length).to.be.above(0);\r",
									"});\r",
									"\r",
									"// -----------------------------------------\r",
									"// 3. Validate each ROLE object\r",
									"// -----------------------------------------\r",
									"pm.test(\"Validate required role fields for each role\", function () {\r",
									"    roles.forEach(role => {\r",
									"        pm.expect(role).to.have.property(\"roleId\");\r",
									"        pm.expect(role).to.have.property(\"userRoleStatus\");\r",
									"\r",
									"        pm.expect(role.roleId).to.be.a(\"string\");\r",
									"        pm.expect(role.userRoleStatus).to.be.a(\"string\");\r",
									"    });\r",
									"});\r",
									"\r",
									"}\r",
									"\r",
									"// ==================================================\r",
									"// 5. SCHEMA VALIDATION (Complete & Safe)\r",
									"// ==================================================\r",
									"pm.test(\"Validate Response Schema\", function () {\r",
									"    // 1. Safety Check: If body is empty, skip schema validation\r",
									"    if (pm.response.text() === \"\") {\r",
									"        console.log(\"Skipping Schema Validation: Response body is empty.\");\r",
									"        return; // Stop the test here\r",
									"    }\r",
									"\r",
									"    var jsonData = pm.response.json();\r",
									"    var requestName = pm.info.requestName; \r",
									"\r",
									"    // --- DEFINITIONS ---\r",
									"    var userObjectSchema = {\r",
									"        \"type\": \"object\",\r",
									"        \"required\": [\"userId\",\"userFirstName\",\"userLastName\",\r",
									"        \"userMiddleName\",\r",
									"        \"userPhoneNumber\",\r",
									"        \"userLocation\",\r",
									"        \"userTimeZone\",\r",
									"        \"userLinkedinUrl\",\r",
									"        \"userEduUg\",\r",
									"        \"userEduPg\",\r",
									"        \"userComments\",\r",
									"        \"userVisaStatus\",\r",
									"        \"userLoginEmail\"\r",
									"        ],\r",
									"        \"properties\": {\r",
									"            \"userId\": { \"type\": \"integer\" },\r",
									"            \"userFirstName\": { \"type\": [\"string\", \"null\"] },\r",
									"            \"userLocation\": { \"type\": [\"string\", \"null\"] },\r",
									"            \"userTimeZone\": { \"type\": [\"string\", \"null\"] },\r",
									"            \"userLinkedinUrl\": { \"type\": [\"string\", \"null\"] },\r",
									"            \"userEduUg\": { \"type\": [\"string\", \"null\"] },\r",
									"            \"userEduPg\": { \"type\": [\"string\", \"null\"] },\r",
									"            \"userComments\": { \"type\": [\"string\", \"null\"] },\r",
									"            \"userVisaStatus\": { \"type\": [\"string\", \"null\"] },\r",
									"            \"userLoginEmail\": { \"type\": [\"string\", \"null\"] }\r",
									"        }\r",
									"        \r",
									"    };\r",
									"\r",
									"    var listSchema = {\r",
									"        \"type\": \"array\",\r",
									"        \"items\": userObjectSchema\r",
									"    };\r",
									"\r",
									"    var messageSchema = {\r",
									"        \"type\": \"object\",\r",
									"        \"properties\": {\r",
									"            \"message\": { \"type\": \"string\" },\r",
									"            \"success\": { \"type\": \"boolean\" }\r",
									"           }\r",
									"    };\r",
									"\r",
									"    // --- LOGIC ---\r",
									"\r",
									"    // CASE A: Endpoints that return ARRAYS\r",
									"    if (requestName === \"User information by Id\") {\r",
									"        if (pm.response.code === 200) {\r",
									"             pm.response.to.have.jsonSchema(listSchema);\r",
									"        } else {\r",
									"             pm.response.to.have.jsonSchema(messageSchema);\r",
									"        }\r",
									"    }\r",
									"        \r",
									"});\r",
									"\r",
									"\r",
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"id": "4897b500-be54-46c1-abf9-09b52c05f7de",
								"exec": [
									"// 1. Get the endpoint value from the CSV row\r",
									"let csvEndpoint = pm.iterationData.get(\"Endpoint\"); // e.g., \"/users/roleStatus/{{roleId}}\"\r",
									"\r",
									"// 2. If the CSV has a value, override the URL\r",
									"if (csvEndpoint) {\r",
									"\r",
									"    // 3. Handle dynamic variable replacement\r",
									"    // Example: replace {{roleId}} if present in CSV endpoint\r",
									"    let currentRoleId = pm.collectionVariables.get(\"roleId\");\r",
									"    if (currentRoleId) {\r",
									"        csvEndpoint = csvEndpoint.replace(\"{{roleId}}\", currentRoleId);\r",
									"    }\r",
									"\r",
									"    // Optional: if you want to replace other placeholders\r",
									"    let currentUserId = pm.collectionVariables.get(\"userId\");\r",
									"    if (currentUserId) {\r",
									"        csvEndpoint = csvEndpoint.replace(\"{{userId}}\", currentUserId);\r",
									"    }\r",
									"\r",
									"    // 4. Construct the full URL\r",
									"    let baseUrl = pm.collectionVariables.get(\"baseUrl\"); // Make sure baseURL is defined in collection variables\r",
									"    let newUrl = baseUrl + csvEndpoint;\r",
									"\r",
									"    // 5. Apply the update\r",
									"    pm.request.url.update(newUrl);\r",
									"    console.log(\"GET Request URL updated to: \" + newUrl);\r",
									"}"
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"id": "99bef5eb-8828-4787-b8c2-0781ae958f4c",
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": {
								"token": "{{token}}"
							}
						},
						"method": "GET",
						"header": [],
						"url": "{{baseUrl}}/users/{{userId}}"
					},
					"response": []
				},
				{
					"name": "Delete User",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "95a6a4f9-a7f1-4eef-83fe-7a5d924eb9ed",
								"exec": [
									"\r",
									"\r",
									"//Dynamic status code validation\r",
									"let expectedStatus = parseInt(pm.iterationData.get(\"Expected Status\"));\r",
									"pm.test(\"Status code matches expected\", function() {\r",
									"    pm.expect(pm.response.code).to.eql(expectedStatus);\r",
									"});\r",
									"\r",
									"//Dynamic status response\r",
									"let expectedMessage = pm.iterationData.get(\"Expected Response Body\");\r",
									"if (expectedMessage) {\r",
									"    pm.test(\"Response message matches expected\", function() {\r",
									"        let res = pm.response.json();\r",
									"        pm.expect(res.message || res.status).to.include(expectedMessage);\r",
									"    });\r",
									"}\r",
									"//schema validation \r",
									"const schema = {\r",
									"    \"type\": \"object\",\r",
									"    \"properties\": {\r",
									"        \"user\": {\r",
									"            \"type\": \"object\",\r",
									"            \"properties\": {\r",
									"                \"userId\": { \"type\": \"string\" },\r",
									"                \"userFirstName\": { \"type\": \"string\" },\r",
									"                \"userLastName\": { \"type\": \"string\" },\r",
									"                \"userMiddleName\": { \"type\": \"string\" },\r",
									"                \"userPhoneNumber\": { \"type\": \"string\" },\r",
									"                \"userLocation\": { \"type\": \"string\" },\r",
									"                \"userTimeZone\": { \"type\": \"string\" },\r",
									"                \"userLinkedinUrl\": { \"type\": \"string\" },\r",
									"                \"userEduUg\": { \"type\": \"string\" },\r",
									"                \"userEduPg\": { \"type\": \"string\" },\r",
									"                \"userComments\": { \"type\": \"string\" },\r",
									"                \"userVisaStatus\": { \"type\": \"string\" },\r",
									"                \"userLoginEmail\": { \"type\": \"string\" }\r",
									"            },\r",
									"            \"required\": [\"userFirstName\", \"userLastName\", \"userPhoneNumber\", \"userLoginEmail\",\r",
									"            \"userLocation\",\"userTimeZone\",\"userVisaStatus\"]\r",
									"        },\r",
									"        \"roles\": {\r",
									"            \"type\": \"array\",\r",
									"            \"items\": {\r",
									"                \"type\": \"object\",\r",
									"                \"properties\": {\r",
									"                    \"roleId\": { \"type\": \"string\" },\r",
									"                    \"userRoleStatus\": { \"type\": \"string\" }\r",
									"                },\r",
									"                \"required\": [\"roleId\", \"userRoleStatus\"]\r",
									"            }\r",
									"        },\r",
									"        \"programBatches\": { \"type\": \"array\" },\r",
									"        \"skills\": { \"type\": \"array\" },\r",
									"        \"documents\": { \"type\": \"array\" }\r",
									"    },\r",
									"    \"required\": [\"user\", \"roles\"]\r",
									"};\r",
									"\r",
									"pm.test(\"Content-Type is application/json\", function () {\r",
									"    if (pm.response.headers.has(\"Content-Type\")) {\r",
									"        pm.expect(pm.response.headers.get(\"Content-Type\")).to.include(\"text/plain\");\r",
									"    } else {\r",
									"        console.warn(\"Content-Type header missing. Skipping check.\");\r",
									"    }\r",
									"});"
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"id": "c10c2c09-b2dd-4a39-911b-b4f02e85fe22",
								"exec": [
									"// 1. Get the endpoint value from the CSV row\r",
									"let csvEndpoint = pm.iterationData.get(\"Endpoint\"); // e.g., \"/users/roleStatus/{{roleId}}\"\r",
									"\r",
									"// 2. If the CSV has a value, override the URL\r",
									"if (csvEndpoint) {\r",
									"\r",
									"    // 3. Handle dynamic variable replacement\r",
									"    // Example: replace {{roleId}} if present in CSV endpoint\r",
									"    let currentRoleId = pm.collectionVariables.get(\"roleId\");\r",
									"    if (currentRoleId) {\r",
									"        csvEndpoint = csvEndpoint.replace(\"{{roleId}}\", currentRoleId);\r",
									"    }\r",
									"\r",
									"    // Optional: if you want to replace other placeholders\r",
									"    let currentUserId = pm.collectionVariables.get(\"userId\");\r",
									"    if (currentUserId) {\r",
									"        csvEndpoint = csvEndpoint.replace(\"{{userId}}\", currentUserId);\r",
									"    }\r",
									"\r",
									"    // 4. Construct the full URL\r",
									"    let baseUrl = pm.collectionVariables.get(\"baseUrl\"); // Make sure baseURL is defined in collection variables\r",
									"    let newUrl = baseUrl + csvEndpoint;\r",
									"\r",
									"    // 5. Apply the update\r",
									"    pm.request.url.update(newUrl);\r",
									"    console.log(\"GET Request URL updated to: \" + newUrl);\r",
									"}"
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"id": "f2e14d2c-2b59-44ef-8b9c-74bec8cf78d2",
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": {
								"token": "{{token}}"
							}
						},
						"method": "DELETE",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": "{{baseUrl}}/users/{{userId}}"
					},
					"response": []
				},
				{
					"name": "Update UserLogin status",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "cf12a508-3816-44dd-b2e7-d6109a08d998",
								"exec": [
									"//Dynamic status code validation\r",
									"let expectedStatus = parseInt(pm.iterationData.get(\"Expected Status\"));\r",
									"pm.test(\"Status code matches expected\", function() {\r",
									"    pm.expect(pm.response.code).to.eql(expectedStatus);\r",
									"});\r",
									"\r",
									"//Dynamic status response\r",
									"let expectedMessage = pm.iterationData.get(\"Expected Response Body\");\r",
									"if (expectedMessage) {\r",
									"    pm.test(\"Response message matches expected\", function() {\r",
									"        let res = pm.response.json();\r",
									"        pm.expect(res.message || res.status).to.include(expectedMessage);\r",
									"    });\r",
									"}\r",
									"\r",
									"// 5. SCHEMA VALIDATION (Complete & Safe)\r",
									"// ==================================================\r",
									"pm.test(\"Validate Response Schema\", function () {\r",
									"    // 1. Safety Check: If body is empty, skip schema validation\r",
									"    if (pm.response.text() === \"\") {\r",
									"        console.log(\"Skipping Schema Validation: Response body is empty.\");\r",
									"        return; // Stop the test here\r",
									"    }\r",
									"\r",
									"    var jsonData = pm.response.json();\r",
									"    var requestName = pm.info.requestName; \r",
									"\r",
									"    // --- DEFINITIONS ---\r",
									"    var loginStatusSchema = {\r",
									"        \"type\": \"string\",\r",
									"         \"properties\": {\r",
									"            \"message\": { \"type\": \"string\" }\r",
									"         }\r",
									"        };\r",
									"      \r",
									"    var messageSchema = {\r",
									"        \"type\": \"object\",\r",
									"        \"properties\": {\r",
									"            \"message\": { \"type\": \"string\" },\r",
									"            \"success\": { \"type\": \"boolean\" }\r",
									"             }\r",
									"    };\r",
									"\r",
									"    // --- LOGIC ---\r",
									"\r",
									"    // CASE A: Endpoints that return ARRAYS\r",
									"    if (requestName === \"Update UserLogin status\") {\r",
									"         if ((pm.response.code === 200) && jsonData.userId !== undefined) {\r",
									"            pm.response.to.have.jsonSchema(loginStatusSchema);\r",
									"        } \r",
									"        // Otherwise -> Message Object (covers Errors and DELETE success messages)\r",
									"        else {\r",
									"            pm.response.to.have.jsonSchema(messageSchema);\r",
									"        }\r",
									"    }\r",
									"        \r",
									"});\r",
									"\r",
									"pm.test(\"Content-Type is application/json\", function () {\r",
									"    if (pm.response.headers.has(\"Content-Type\")) {\r",
									"        pm.expect(pm.response.headers.get(\"Content-Type\")).to.include(\"text/plain\");\r",
									"    } else {\r",
									"        console.warn(\"Content-Type header missing. Skipping check.\");\r",
									"    }\r",
									"});"
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"id": "493821f7-73b1-4f74-92f4-5628586fa18b",
								"exec": [
									"// 1. Get the endpoint value from the CSV row\r",
									"let csvEndpoint = pm.iterationData.get(\"Endpoint\"); // e.g., \"/users/roleStatus/{{roleId}}\"\r",
									"\r",
									"// 2. If the CSV has a value, override the URL\r",
									"if (csvEndpoint) {\r",
									"\r",
									"    // 3. Handle dynamic variable replacement\r",
									"    // Example: replace {{roleId}} if present in CSV endpoint\r",
									"    let currentRoleId = pm.collectionVariables.get(\"roleId\");\r",
									"    if (currentRoleId) {\r",
									"        csvEndpoint = csvEndpoint.replace(\"{{roleId}}\", currentRoleId);\r",
									"    }\r",
									"\r",
									"    // Optional: if you want to replace other placeholders\r",
									"    let currentUserId = pm.collectionVariables.get(\"userId\");\r",
									"    if (currentUserId) {\r",
									"        csvEndpoint = csvEndpoint.replace(\"{{userId}}\", currentUserId);\r",
									"    }\r",
									"\r",
									"    // 4. Construct the full URL\r",
									"    let baseUrl = pm.collectionVariables.get(\"baseUrl\"); // Make sure baseURL is defined in collection variables\r",
									"    let newUrl = baseUrl + csvEndpoint;\r",
									"\r",
									"    // 5. Apply the update\r",
									"    pm.request.url.update(newUrl);\r",
									"    console.log(\"GET Request URL updated to: \" + newUrl);\r",
									"}\r",
									"\r",
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"id": "592b43aa-c503-4516-88c1-f161f1c6ce0c",
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": {
								"token": "{{token}}"
							}
						},
						"method": "PUT",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{{Payload}}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": "{{baseUrl}}/users/userLogin/{{userId}}"
					},
					"response": []
				},
				{
					"name": "Update User",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "a0b184da-8cc1-4964-99ac-c9ded7973bc3",
								"exec": [
									"//Dynamic status code validation\r",
									"let expectedStatus = parseInt(pm.iterationData.get(\"Expected Status\"));\r",
									"pm.test(\"Status code matches expected\", function() {\r",
									"    pm.expect(pm.response.code).to.eql(expectedStatus);\r",
									"});\r",
									"\r",
									"//Dynamic status response\r",
									"let expectedMessage = pm.iterationData.get(\"Expected Response Body\");\r",
									"if (expectedMessage) {\r",
									"    pm.test(\"Response message matches expected\", function() {\r",
									"        let res = pm.response.json();\r",
									"        pm.expect(res.message || res.status).to.include(expectedMessage);\r",
									"    });\r",
									"}\r",
									"\r",
									"// 5. SCHEMA VALIDATION (Complete & Safe)\r",
									"// ==================================================\r",
									"pm.test(\"Validate Response Schema\", function () {\r",
									"    // 1. Safety Check: If body is empty, skip schema validation\r",
									"    if (pm.response.text() === \"\") {\r",
									"        console.log(\"Skipping Schema Validation: Response body is empty.\");\r",
									"        return; // Stop the test here\r",
									"    }\r",
									"\r",
									"    var jsonData = pm.response.json();\r",
									"    var requestName = pm.info.requestName; \r",
									"\r",
									"    // --- DEFINITIONS ---\r",
									"    var updateUserSchema = {\r",
									"        \"type\": \"string\",\r",
									"         \"properties\": {\r",
									"            \"message\": { \"type\": \"string\" }\r",
									"         }\r",
									"        };\r",
									"      \r",
									"    var messageSchema = {\r",
									"        \"type\": \"object\",\r",
									"        \"properties\": {\r",
									"            \"message\": { \"type\": \"string\" },\r",
									"            \"success\": { \"type\": \"boolean\" }\r",
									"             }\r",
									"    };\r",
									"\r",
									"    // --- LOGIC ---\r",
									"\r",
									"    // CASE A: Endpoints that return ARRAYS\r",
									"    if (requestName === \"Update User\") {\r",
									"         if ((pm.response.code === 200) && jsonData.userId !== undefined) {\r",
									"            pm.response.to.have.jsonSchema(updateUserSchema);\r",
									"        } \r",
									"        // Otherwise -> Message Object (covers Errors and DELETE success messages)\r",
									"        else {\r",
									"            pm.response.to.have.jsonSchema(messageSchema);\r",
									"        }\r",
									"    }\r",
									"        \r",
									"});\r",
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"id": "4bc213c9-ddaa-4834-a413-5f6488ebb219",
								"exec": [
									"// 1. Get the endpoint value from the CSV row\r",
									"let csvEndpoint = pm.iterationData.get(\"Endpoint\"); // e.g., \"/users/roleStatus/{{roleId}}\"\r",
									"\r",
									"// 2. If the CSV has a value, override the URL\r",
									"if (csvEndpoint) {\r",
									"\r",
									"    // 3. Handle dynamic variable replacement\r",
									"    // Example: replace {{roleId}} if present in CSV endpoint\r",
									"    let currentRoleId = pm.collectionVariables.get(\"roleId\");\r",
									"    if (currentRoleId) {\r",
									"        csvEndpoint = csvEndpoint.replace(\"{{roleId}}\", currentRoleId);\r",
									"    }\r",
									"\r",
									"    // Optional: if you want to replace other placeholders\r",
									"    let currentUserId = pm.collectionVariables.get(\"userId\");\r",
									"    if (currentUserId) {\r",
									"        csvEndpoint = csvEndpoint.replace(\"{{userId}}\", currentUserId);\r",
									"    }\r",
									"\r",
									"    // 4. Construct the full URL\r",
									"    let baseUrl = pm.collectionVariables.get(\"baseUrl\"); // Make sure baseURL is defined in collection variables\r",
									"    let newUrl = baseUrl + csvEndpoint;\r",
									"\r",
									"    // 5. Apply the update\r",
									"    pm.request.url.update(newUrl);\r",
									"    console.log(\"GET Request URL updated to: \" + newUrl);\r",
									"}\r",
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"id": "e818299c-22c8-467f-b744-55af07ce3ec3",
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": {
								"token": "{{token}}"
							}
						},
						"method": "PUT",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{{Payload}}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": "{{baseUrl}}/users/{{userId}}"
					},
					"response": []
				},
				{
					"name": "all users",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"id": "49ee3aad-bde7-4152-8a37-593fc9b57cfb",
								"exec": [
									"// 1. Get the endpoint value from the CSV row\r",
									"let csvEndpoint = pm.iterationData.get(\"Endpoint\"); // e.g., \"/users/roleStatus/{{roleId}}\"\r",
									"\r",
									"// 2. If the CSV has a value, override the URL\r",
									"if (csvEndpoint) {\r",
									"\r",
									"    // 3. Handle dynamic variable replacement\r",
									"    // Example: replace {{roleId}} if present in CSV endpoint\r",
									"    let currentRoleId = pm.collectionVariables.get(\"roleId\");\r",
									"    if (currentRoleId) {\r",
									"        csvEndpoint = csvEndpoint.replace(\"{{roleId}}\", currentRoleId);\r",
									"    }\r",
									"\r",
									"    // Optional: if you want to replace other placeholders\r",
									"    let currentUserId = pm.collectionVariables.get(\"userId\");\r",
									"    if (currentUserId) {\r",
									"        csvEndpoint = csvEndpoint.replace(\"{{userId}}\", currentUserId);\r",
									"    }\r",
									"\r",
									"    // 4. Construct the full URL\r",
									"    let baseUrl = pm.collectionVariables.get(\"baseUrl\"); // Make sure baseURL is defined in collection variables\r",
									"    let newUrl = baseUrl + csvEndpoint;\r",
									"\r",
									"    // 5. Apply the update\r",
									"    pm.request.url.update(newUrl);\r",
									"    console.log(\"GET Request URL updated to: \" + newUrl);\r",
									"}\r",
									"\r",
									"// var overrideStatus = pm.iterationData.get(\"Token Override\");\r",
									"\r",
									"// if (overrideStatus === \"invalid\") {\r",
									"//     // Use 'pm.request.auth.bearer' to directly modify the Auth Helper\r",
									"//     // This is the most direct way to tell the Auth Tab \"Use THIS token, not the variable\"\r",
									"//     pm.request.auth.use(\"bearer\", {\r",
									"//         token: \"INVALID_TOKEN_12345\"\r",
									"//     });\r",
									"    \r",
									"//     console.log(\"Updated Auth Tab directly with INVALID token\");\r",
									"// }"
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						},
						{
							"listen": "test",
							"script": {
								"id": "84d2429c-606c-4155-9cb5-4475b7920338",
								"exec": [
									"\r",
									"//Dynamic status code validation\r",
									"const expectedStatus = parseInt(pm.iterationData.get(\"Expected Status\"));\r",
									"if (expectedStatus) {\r",
									"    pm.test(\"Status code is \" + expectedStatus, function () {\r",
									"        pm.response.to.have.status(expectedStatus);\r",
									"    });\r",
									"}\r",
									"\r",
									"\r",
									"//Dynamic status response\r",
									"let expectedMessage = pm.iterationData.get(\"Expected Response Body\");\r",
									"if (expectedMessage) {\r",
									"    pm.test(\"Response message matches expected\", function() {\r",
									"        let res = pm.response.json();\r",
									"        pm.expect(res.message || res.status).to.include(expectedMessage);\r",
									"    });\r",
									"}\r",
									"// Parse response\r",
									"//let res = pm.response.json();\r",
									"\r",
									"// Parse Response\r",
									"// ---------------------------\r",
									"let res;\r",
									"try {\r",
									"    res = pm.response.json();\r",
									"} catch (e) {\r",
									"    // No JSON body\r",
									"    res = {};\r",
									"}\r",
									"\r",
									"\r",
									"// ==================================================\r",
									"// 5. SCHEMA VALIDATION (Complete & Safe)\r",
									"// ==================================================\r",
									"pm.test(\"Validate Response Schema\", function () {\r",
									"    // 1. Safety Check: If body is empty, skip schema validation\r",
									"    if (pm.response.text() === \"\") {\r",
									"        console.log(\"Skipping Schema Validation: Response body is empty.\");\r",
									"        return; // Stop the test here\r",
									"    }\r",
									"\r",
									"    var jsonData = pm.response.json();\r",
									"    var requestName = pm.info.requestName; \r",
									"\r",
									"    // --- DEFINITIONS ---\r",
									"    var alluserObjectSchema = {\r",
									"        \"type\": \"object\",\r",
									"        \"required\": [\"userId\",\"userFirstName\",\"userLastName\",\r",
									"        \"userPhoneNumber\",\r",
									"        \"userLocation\",\r",
									"        \"userTimeZone\",\r",
									"        \"userLinkedinUrl\",\r",
									"        \"userEduUg\",\r",
									"        \"userEduPg\",\r",
									"        \"userVisaStatus\",\r",
									"        \"userLoginEmail\"\r",
									"        ],\r",
									"        \"properties\": {\r",
									"            \"userId\": { \"type\": \"string\" },\r",
									"            \"userFirstName\": { \"type\": [\"string\", \"null\"] },\r",
									"            \"userLastName\": { \"type\": [\"string\", \"null\"] },\r",
									"            \"userMiddleName\": { \"type\": [\"string\", \"null\"] },\r",
									"            \"userPhoneNumber\": { \"type\": [\"string\", \"null\"] },\r",
									"            \"userLocation\": { \"type\": [\"string\", \"null\"] },\r",
									"            \"userTimeZone\": { \"type\": [\"string\", \"null\"] },\r",
									"            \"userLinkedinUrl\": { \"type\": [\"string\", \"null\"] },\r",
									"            \"userEduUg\": { \"type\": [\"string\", \"null\"] },\r",
									"            \"userEduPg\": { \"type\": [\"string\", \"null\"] },\r",
									"            \"userComments\": { \"type\": [\"string\", \"null\"] },\r",
									"            \"userVisaStatus\": { \"type\": [\"string\", \"null\"] },\r",
									"            \"userLoginEmail\": { \"type\": [\"string\", \"null\"] }\r",
									"        }\r",
									"        \r",
									"    };\r",
									"\r",
									"    var listSchema = {\r",
									"        \"type\": \"array\",\r",
									"        \"items\": alluserObjectSchema\r",
									"    };\r",
									"\r",
									"    var messageSchema = {\r",
									"        \"type\": \"object\",\r",
									"        \"properties\": {\r",
									"            \"message\": { \"type\": \"string\" },\r",
									"            \"success\": { \"type\": \"boolean\" }\r",
									"           }\r",
									"    };\r",
									"\r",
									"    // --- LOGIC ---\r",
									"\r",
									"    // CASE A: Endpoints that return ARRAYS\r",
									"    //if (requestName === \"all users\") {\r",
									"        if (pm.response.code === 200) {\r",
									"             pm.response.to.have.jsonSchema(listSchema);\r",
									"        } else {\r",
									"             pm.response.to.have.jsonSchema(messageSchema);\r",
									"        }\r",
									"    \r",
									"        \r",
									"});\r",
									"\r",
									"\r",
									"\r",
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"id": "901b3833-2c01-4310-a86a-ebcf9a2ed2b5",
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": {
								"token": "{{token}}"
							}
						},
						"method": "GET",
						"header": [],
						"url": "{{baseUrl}}/users"
					},
					"response": []
				},
				{
					"name": "all users with facets",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "95c4576b-f2e4-4aa4-9053-480d6f2c6e25",
								"exec": [
									"//Dynamic status code validation\r",
									"const expectedStatus = parseInt(pm.iterationData.get(\"Expected Status\"));\r",
									"if (expectedStatus) {\r",
									"    pm.test(\"Status code is \" + expectedStatus, function () {\r",
									"        pm.response.to.have.status(expectedStatus);\r",
									"    });\r",
									"}\r",
									"\r",
									"//Dynamic status response\r",
									"let expectedMessage = pm.iterationData.get(\"Expected Response Body\");\r",
									"if (expectedMessage) {\r",
									"    pm.test(\"Response message matches expected\", function() {\r",
									"        let res = pm.response.json();\r",
									"        pm.expect(res.message || res.status).to.include(expectedMessage);\r",
									"    });\r",
									"}\r",
									"\r",
									"\r",
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"id": "6b655970-237c-4373-94d9-6ebe351516b8",
								"exec": [
									"// 1. Get the endpoint value from the CSV row\r",
									"let csvEndpoint = pm.iterationData.get(\"Endpoint\"); // e.g., \"/users/roleStatus/{{roleId}}\"\r",
									"\r",
									"// 2. If the CSV has a value, override the URL\r",
									"if (csvEndpoint) {\r",
									"\r",
									"    // 3. Handle dynamic variable replacement\r",
									"    // Example: replace {{roleId}} if present in CSV endpoint\r",
									"    let currentRoleId = pm.collectionVariables.get(\"roleId\");\r",
									"    if (currentRoleId) {\r",
									"        csvEndpoint = csvEndpoint.replace(\"{{roleId}}\", currentRoleId);\r",
									"    }\r",
									"\r",
									"    // Optional: if you want to replace other placeholders\r",
									"    let currentUserId = pm.collectionVariables.get(\"userId\");\r",
									"    if (currentUserId) {\r",
									"        csvEndpoint = csvEndpoint.replace(\"{{userId}}\", currentUserId);\r",
									"    }\r",
									"\r",
									"    // 4. Construct the full URL\r",
									"    let baseUrl = pm.collectionVariables.get(\"baseUrl\"); // Make sure baseURL is defined in collection variables\r",
									"    let newUrl = baseUrl + csvEndpoint;\r",
									"\r",
									"    // 5. Apply the update\r",
									"    pm.request.url.update(newUrl);\r",
									"    console.log(\"GET Request URL updated to: \" + newUrl);\r",
									"}\r",
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"id": "12c3ecc1-9791-4688-a3ef-59af54d1c061",
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": {
								"token": "{{token}}"
							}
						},
						"method": "GET",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": "{{baseUrl}}/v2/users"
					},
					"response": []
				},
				{
					"name": "update userRole program batch status",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "dcc398b6-1060-4c24-b551-6a475e7411c6",
								"exec": [
									"//Dynamic status code validation\r",
									"let expectedStatus = parseInt(pm.iterationData.get(\"Expected Status\"));\r",
									"pm.test(\"Status code matches expected\", function() {\r",
									"    pm.expect(pm.response.code).to.eql(expectedStatus);\r",
									"});\r",
									"\r",
									"//Dynamic status response\r",
									"let expectedMessage = pm.iterationData.get(\"Expected Response Body\");\r",
									"if (expectedMessage) {\r",
									"    pm.test(\"Response message matches expected\", function() {\r",
									"        let res = pm.response.json();\r",
									"        pm.expect(res.message || res.status).to.include(expectedMessage);\r",
									"    });\r",
									"}\r",
									"\r",
									"// 5. SCHEMA VALIDATION (Complete & Safe)\r",
									"// ==================================================\r",
									"pm.test(\"Validate Response Schema\", function () {\r",
									"    // 1. Safety Check: If body is empty, skip schema validation\r",
									"    if (pm.response.text() === \"\") {\r",
									"        console.log(\"Skipping Schema Validation: Response body is empty.\");\r",
									"        return; // Stop the test here\r",
									"    }\r",
									"\r",
									"    var jsonData = pm.response.json();\r",
									"    var requestName = pm.info.requestName; \r",
									"\r",
									"    // --- DEFINITIONS ---\r",
									"    var updateroleIdSchema = {\r",
									"        \"type\": \"string\",\r",
									"         \"properties\": {\r",
									"            \"message\": { \"type\": \"string\" }\r",
									"         }\r",
									"        };\r",
									"      \r",
									"    var messageSchema = {\r",
									"        \"type\": \"object\",\r",
									"        \"properties\": {\r",
									"            \"message\": { \"type\": \"string\" },\r",
									"            \"success\": { \"type\": \"boolean\" }\r",
									"             }\r",
									"    };\r",
									"\r",
									"    // --- LOGIC ---\r",
									"\r",
									"    // CASE A: Endpoints that return ARRAYS\r",
									"    if (requestName === \"Update User role Id\") {\r",
									"         if ((pm.response.code === 200) && jsonData.userId !== undefined) {\r",
									"            pm.response.to.have.jsonSchema(updateroleIdSchema);\r",
									"        } \r",
									"        // Otherwise -> Message Object (covers Errors and DELETE success messages)\r",
									"        else {\r",
									"            pm.response.to.have.jsonSchema(messageSchema);\r",
									"        }\r",
									"    }\r",
									"        \r",
									"});\r",
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"id": "da1eb592-cee3-4cb5-92ee-96054c6622b6",
								"exec": [
									"// 1. Get the endpoint value from the CSV row\r",
									"let csvEndpoint = pm.iterationData.get(\"Endpoint\"); // e.g., \"/users/roleStatus/{{roleId}}\"\r",
									"\r",
									"// 2. If the CSV has a value, override the URL\r",
									"if (csvEndpoint) {\r",
									"\r",
									"    // 3. Handle dynamic variable replacement\r",
									"    // Example: replace {{roleId}} if present in CSV endpoint\r",
									"    let currentRoleId = pm.collectionVariables.get(\"roleId\");\r",
									"    if (currentRoleId) {\r",
									"        csvEndpoint = csvEndpoint.replace(\"{{roleId}}\", currentRoleId);\r",
									"    }\r",
									"\r",
									"    // Optional: if you want to replace other placeholders\r",
									"    let currentUserId = pm.collectionVariables.get(\"userId\");\r",
									"    if (currentUserId) {\r",
									"        csvEndpoint = csvEndpoint.replace(\"{{userId}}\", currentUserId);\r",
									"    }\r",
									"\r",
									"    // 4. Construct the full URL\r",
									"    let baseUrl = pm.collectionVariables.get(\"baseUrl\"); // Make sure baseURL is defined in collection variables\r",
									"    let newUrl = baseUrl + csvEndpoint;\r",
									"\r",
									"    // 5. Apply the update\r",
									"    pm.request.url.update(newUrl);\r",
									"    console.log(\"GET Request URL updated to: \" + newUrl);\r",
									"}\r",
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"id": "3508c5ab-a64e-44da-b513-08e732959615",
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": {
								"token": "{{token}}"
							}
						},
						"method": "PUT",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{{Payload}}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": "{{baseUrl}}/users/roleProgramBatchStatus/{{userId}}"
					},
					"response": []
				},
				{
					"name": "Update User role Id",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "71eb1de8-9331-4a22-b087-0a6d6ad26d8b",
								"exec": [
									"//Dynamic status code validation\r",
									"let expectedStatus = parseInt(pm.iterationData.get(\"Expected Status\"));\r",
									"pm.test(\"Status code matches expected\", function() {\r",
									"    pm.expect(pm.response.code).to.eql(expectedStatus);\r",
									"});\r",
									"\r",
									"//Dynamic status response\r",
									"let expectedMessage = pm.iterationData.get(\"Expected Response Body\");\r",
									"if (expectedMessage) {\r",
									"    pm.test(\"Response message matches expected\", function() {\r",
									"        let res = pm.response.json();\r",
									"        pm.expect(res.message || res.status).to.include(expectedMessage);\r",
									"    });\r",
									"}\r",
									"\r",
									"// 5. SCHEMA VALIDATION (Complete & Safe)\r",
									"// ==================================================\r",
									"pm.test(\"Validate Response Schema\", function () {\r",
									"    var requestName = pm.info.requestName;\r",
									"    // --- DEFINITIONS ---\r",
									"    var messageSchema = {\r",
									"        \"type\": \"object\",\r",
									"        \"required\": [\"message\", \"success\"],\r",
									"        \"properties\": {\r",
									"            \"message\": { \"type\": \"string\" },\r",
									"            \"success\": { \"type\": \"boolean\" }\r",
									"        }\r",
									"    };\r",
									"    if (requestName === \"Update User role Id\") {\r",
									"        // CASE 1: Positive Scenario (200 OK + String Body)\r",
									"        if (pm.response.code === 200) {\r",
									"            // Since it's a plain string, we validate the TEXT, not JSON\r",
									"            pm.expect(pm.response.text()).to.be.a('string');\r",
									"        }\r",
									"        // CASE 2: Negative Scenario (400/404/500 + JSON Object)\r",
									"        else {\r",
									"            // We only parse JSON here, because we know it's an object\r",
									"            var jsonData = pm.response.json();\r",
									"            pm.expect(jsonData).to.have.jsonSchema(messageSchema);\r",
									"        }\r",
									"    }\r",
									"});\r",
									"\r",
									"pm.test(\"Content-Type is application/json\", function () {\r",
									"    if (pm.response.headers.has(\"Content-Type\")) {\r",
									"        pm.expect(pm.response.headers.get(\"Content-Type\")).to.include(\"text/plain\");\r",
									"    } else {\r",
									"        console.warn(\"Content-Type header missing. Skipping check.\");\r",
									"    }\r",
									"});"
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"id": "f702efb5-ed05-45ef-92bb-5c4d6ad5504e",
								"exec": [
									"// 1. Get the endpoint value from the CSV row\r",
									"let csvEndpoint = pm.iterationData.get(\"Endpoint\"); // e.g., \"/users/roleStatus/{{roleId}}\"\r",
									"\r",
									"// 2. If the CSV has a value, override the URL\r",
									"if (csvEndpoint) {\r",
									"\r",
									"    // 3. Handle dynamic variable replacement\r",
									"    // Example: replace {{roleId}} if present in CSV endpoint\r",
									"    let currentRoleId = pm.collectionVariables.get(\"roleId\");\r",
									"    if (currentRoleId) {\r",
									"        csvEndpoint = csvEndpoint.replace(\"{{roleId}}\", currentRoleId);\r",
									"    }\r",
									"\r",
									"    // Optional: if you want to replace other placeholders\r",
									"    let currentUserId = pm.collectionVariables.get(\"userId\");\r",
									"    if (currentUserId) {\r",
									"        csvEndpoint = csvEndpoint.replace(\"{{userId}}\", currentUserId);\r",
									"    }\r",
									"\r",
									"    // 4. Construct the full URL\r",
									"    let baseUrl = pm.collectionVariables.get(\"baseUrl\"); // Make sure baseURL is defined in collection variables\r",
									"    let newUrl = baseUrl + csvEndpoint;\r",
									"\r",
									"    // 5. Apply the update\r",
									"    pm.request.url.update(newUrl);\r",
									"    console.log(\"GET Request URL updated to: \" + newUrl);\r",
									"}\r",
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"id": "9ff01ad7-0db8-4e27-84b4-44a8d39832fc",
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": {
								"token": "{{token}}"
							}
						},
						"method": "PUT",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{{Payload}}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": "{{baseUrl}}/users/roleId/{{userId}}"
					},
					"response": []
				}
			],
			"id": "7267c003-ea5b-4364-acf0-e45a52c14079",
			"event": [
				{
					"listen": "prerequest",
					"script": {
						"id": "0b756eec-f2c0-4fc9-9b68-1f53d68d80f6",
						"type": "text/javascript",
						"packages": {},
						"requests": {},
						"exec": [
							"// ----------------------------------------------------------------\r",
							"// 1. SKIP LOGIC (Traffic Cop)\r",
							"// ----------------------------------------------------------------\r",
							"var targetRequest = pm.iterationData.get(\"Request Name\");\r",
							"var currentRequest = pm.info.requestName;\r",
							"// If RequestName is defined in CSV, only run that specific request\r",
							"if (targetRequest && targetRequest !== currentRequest) {\r",
							"    pm.execution.skipRequest();\r",
							"    return; // Stop executing the rest of the script\r",
							"}\r",
							"\r",
							"var csvPayload = pm.iterationData.get(\"Payload\");\r",
							"if (csvPayload) {\r",
							"    if (typeof csvPayload === 'object') {\r",
							"        // It's a JSON object (from JSON file) -> Stringify it for the Body\r",
							"        pm.collectionVariables.set(\"Payload\", JSON.stringify(csvPayload));\r",
							"    } else {\r",
							"        // It's a String (from CSV) -> Try to parse/clean it\r",
							"        try {\r",
							"            var obj = JSON.parse(csvPayload);\r",
							"            pm.collectionVariables.set(\"Payload\", JSON.stringify(obj));\r",
							"        } catch (e) {\r",
							"            pm.collectionVariables.set(\"Payload\", csvPayload);\r",
							"        }\r",
							"    }\r",
							"}\r",
							"\r",
							"var overrideStatus = pm.iterationData.get(\"Token Override\");\r",
							"\r",
							"if (overrideStatus === \"invalid\") {\r",
							"    // Use 'pm.request.auth.bearer' to directly modify the Auth Helper\r",
							"    // This is the most direct way to tell the Auth Tab \"Use THIS token, not the variable\"\r",
							"    pm.request.auth.use(\"bearer\", {\r",
							"        token: \"INVALID_TOKEN_12345\"\r",
							"    });\r",
							"    \r",
							"    console.log(\"Updated Auth Tab directly with INVALID token\");\r",
							"}"
						]
					}
				},
				{
					"listen": "test",
					"script": {
						"id": "9125ea7b-3e60-4f95-927f-86175ecf938d",
						"type": "text/javascript",
						"packages": {},
						"requests": {},
						"exec": [
							"// Content-Type Check (Safe Version)\r",
							"pm.test(\"Content-Type is application/json\", function () {\r",
							"    if (pm.response.headers.has(\"Content-Type\")) {\r",
							"        pm.expect(pm.response.headers.get(\"Content-Type\")).to.include(\"application/json\");\r",
							"    } else {\r",
							"        console.warn(\"Content-Type header missing. Skipping check.\");\r",
							"    }\r",
							"});\r",
							"\r",
							"\r",
							"\r",
							"\r",
							""
						]
					}
				}
			]
		}
	],
	"auth": {
		"type": "bearer",
		"bearer": {
			"token": "{{token}}"
		}
	},
	"variable": [
		{
			"id": "b6cd5a13-4f0d-438b-b384-ccc0cdb1d097",
			"key": "token",
			"value": ""
		},
		{
			"id": "ea1dc346-27e1-400d-912b-a28b25a96ec7",
			"key": "baseUrl",
			"value": ""
		},
		{
			"id": "4a6ee812-18c5-44dc-833d-ced75d6e5f33",
			"key": "Payload",
			"value": ""
		},
		{
			"id": "636ba664-f617-420d-a007-88a9acf3dd8d",
			"key": "userId",
			"value": ""
		},
		{
			"id": "8cacaa0f-e3a0-4950-92d7-c605b6ec493b",
			"key": "roleId",
			"value": ""
		}
	]
}